# Webアプリ仕様書

## 1. 概要

冷蔵庫にある食材や追加予算を入力すると、LLMを用いて栄養バランスの良い献立を生成し、調理手順や概算カロリーも表示するWebアプリ。

## 2. 主な機能

### 2.1 入出力フォーム機能
食材リストをテキスト入力

追加購入可能な予算を入力（任意）

同一画面上に生成された献立・調理手順・カロリー・栄養価コメントを表示

### 2.2 生成AIリクエスト API
入力された食材・予算と定型プロンプトを合成し、LLMに渡す

献立・各料理の材料・手順・概算カロリー・栄養価をJSON形式で生成

OpenRouter経由でGPTモデル（例：GPT-4o-mini）にリクエスト

応答をJSON形式でフロントに返す


## 3. 使用技術

| 分類         | 技術・ライブラリ |
|--------------|------------------|
| フロントエンド | Vue.js / HTML5 + CSS3 |
| バックエンド  | Flask |
| 通信方式     | Fetch API / JSON |
| LLMモデル    | OpenRouter API（OpenAI, Anthropic, Mistral等） |

## 4. 入出力例

### 入力
- ユーザー入力：「鶏肉、玉ねぎ、ジャガイモ」

- 追加予算：300円

### 出力

- 出力例：鶏肉の照り焼き
         鶏肉、醤油、みりん
         320kcal
         タンパク質：25
         脂質：15
         炭水化物：12

         ジャガイモと玉ねぎの味噌汁
         じゃがいも、玉ねぎ、味噌
         120kcal
         タンパク質：3
         脂質：2
         炭水化物：18

         合計：440kcal

         不足栄養素を補うために小鉢を追加するとよいでしょう。

### システム構成図
### 5.1 ユーザー環境 (Client)

ユーザーはWebブラウザを介してアプリケーションにアクセスします。
ブラウザ上で動作する Vue.js が、ユーザーインターフェース（UI）の構築と、ユーザー操作の受付を担当します。

### 5.2 アプリケーションサーバー (Flask)

PythonのWebフレームワークである Flask (app.py) で構築されています。
最初のアクセス時に、Vue.jsを含む index.html をブラウザに返します。
フロントエンドからのAPIリクエスト (/generate_menu) を受け付けるエンドポイントを提供します。

### 5.3 外部AIサービス (OpenRouter)

献立を生成する大規模言語モデル（LLM）へのインターフェースです。
Flaskサーバーからのリクエストに基づき、AIが献立を生成し、結果をJSON形式で返します。
処理のシーケンス
ユーザーがブラウザで食材などの情報を入力し、「献立を作成」ボタンをクリックします。
ブラウザ上のVue.jsは、入力された情報をもとにFlaskサーバーの /generate_menu APIへリクエストを送信します。
Flaskサーバーはリクエストを受け取り、OpenRouter APIが要求する形式にデータを整形して、献立生成をリクエストします。
OpenRouterは献立を生成し、JSON形式でFlaskサーバーに返します。
Flaskサーバーは受け取ったJSONをそのままブラウザに返します。
ブラウザ上のVue.jsは、受け取ったJSONデータを解析し、画面に見やすく整形して表示します。