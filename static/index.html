<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>みんなの献立アドバイザー</title>
  <!-- Vue.jsライブラリをCDNから読み込み -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <!-- Bootstrap (CSSフレームワーク) をCDNから読み込み -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
</head>
<body>
  <!-- Vueアプリケーションがマウントされるルート要素。このdiv内でVueの機能が有効になる -->
  <div id="app" class="container my-4">
    <h2 class="mb-4">みんなの献立アドバイザー</h2>

    <!-- 入力フォームセクション -->

    <!-- 食材入力 -->
    <div class="mb-3">
      <label for="ingredients" class="form-label">食材（カンマ区切り）:</label>
      <!-- v-model="ingredientsText": Vueインスタンスの`ingredientsText`データと双方向バインディング -->
      <textarea v-model="ingredientsText" id="ingredients" class="form-control" rows="3"
        placeholder="例: 鶏肉, 玉ねぎ, じゃがいも"></textarea>
    </div>

    <!-- 予算入力 -->
    <div class="mb-3">
      <label for="budget" class="form-label">予算（円・任意）:</label>
      <!-- v-model="budget": Vueインスタンスの`budget`データと双方向バインディング -->
      <input v-model="budget" type="number" id="budget" class="form-control" placeholder="500">
    </div>

    <!-- 嗜好・条件入力 -->
    <div class="mb-3">
      <label for="preference" class="form-label">嗜好・条件（任意）:</label>
      <!-- v-model="preference": Vueインスタンスの`preference`データと双方向バインディング -->
      <input v-model="preference" id="preference" type="text" class="form-control"
             placeholder="例: カロリー控えめ、中華、和食、糖質制限など">
    </div>

    <!-- 実行ボタン -->
    <div class="mb-3">
      <!-- @click="generateMenu": クリック時にVueインスタンスの`generateMenu`メソッドを実行 -->
      <!-- :disabled="loading": `loading`データがtrueの間、ボタンを無効化する -->
      <button class="btn btn-primary" @click="generateMenu" :disabled="loading">献立を作成</button>
    </div>

    <!-- 結果表示セクション -->

    <!-- v-if="loading": `loading`データがtrueの場合のみ、この要素を表示 -->
    <div v-if="loading" class="alert alert-info">献立を生成中です...</div>
    <!-- v-if="error": `error`データに値がある場合のみ、この要素を表示 -->
    <div v-if="error" class="alert alert-danger">{{ error }}</div>

    <!-- v-if="menu": `menu`データに値がある場合のみ、この要素（献立全体）を表示 -->
    <div v-if="menu" class="mt-4">
      <h3>{{ menu.menu_title }}</h3>

      <!-- 今ある食材だけで作る献立プラン -->
      <!-- 'menu-plan'はmain.jsで定義したカスタムコンポーネント -->
      <!-- :title, :plan はコンポーネントに渡すプロパティ(props) -->
      <menu-plan
        title="① 今ある食材だけで作る献立"
        :plan="menu.plan_without_budget">
      </menu-plan>

      <!-- 予算を使った献立プラン -->
      <menu-plan
        title="② 予算を使った献立"
        :plan="menu.plan_with_budget">
      </menu-plan>
    </div>
  </div>

  <!-- 外部JavaScriptファイルを読み込み。Vueのロジックが記述されている -->
  <!-- defer属性により、HTMLのパース完了後にスクリプトが実行される -->
  <script src="/js/main.js" defer></script>
</body>
</html>